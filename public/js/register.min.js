function getCookie(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}window.addEventListener("load",function(){let e=document.getElementsByTagName("input");for(let t=e.length-1;t>=0;t--)e[t].nextElementSibling&&e[t].nextElementSibling.classList.contains("form-error")&&e[t].classList.add("invalid");let t=new Validation;fetch(`/asset/lang/${getCookie("lang")}.json`).then(e=>e.json()).then(e=>{t.trans=e,document.querySelector(".form").addEventListener("submit",function(e){e.preventDefault();let n=this.email.value,i=this.password.value,s=this.nickname.value;return t.isEmpty(n)?t.setError("empty email",this.email):t.isEmail(n)?t.isEmpty(s)?t.setError("empty username",this.nickname):t.isEmpty(i)?t.setError("empty password",this.password):t.pwdTooShort(i)?t.setError("invalid password",this.password):void this.submit():t.setError("invalid email",this.email)})}).catch(e=>console.error(e))}),document.addEventListener("input",function(e){let t=e.target.nextElementSibling;t.classList.contains("form-error")&&(t.style.setProperty("display","none"),e.target.classList.remove("invalid"))});